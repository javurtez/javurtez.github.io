(()=>{"use strict";Phaser;class t{static board={path:"/Initial/Sprites/board.png"};static button={path:"/Initial/Sprites/UI/ui_atlas",frame:"button.png"};static button_play={path:"/Initial/Sprites/UI/ui_atlas",frame:"button_play.png"};static game_bg={path:"/Initial/Sprites/game_bg.jpg"};static game_fruit_blue={path:"/Gameplay/Sprites/game_fruit_blue.png"};static game_fruit_blue_l={path:"/Gameplay/Sprites/game_fruit_blue_l.png"};static game_fruit_blue_r={path:"/Gameplay/Sprites/game_fruit_blue_r.png"};static game_fruit_blue_s={path:"/Gameplay/Sprites/game_fruit_blue_s.png"};static game_fruit_green={path:"/Gameplay/Sprites/game_fruit_green.png"};static game_fruit_green_l={path:"/Gameplay/Sprites/game_fruit_green_l.png"};static game_fruit_green_r={path:"/Gameplay/Sprites/game_fruit_green_r.png"};static game_fruit_green_s={path:"/Gameplay/Sprites/game_fruit_green_s.png"};static game_fruit_orange={path:"/Gameplay/Sprites/game_fruit_orange.png"};static game_fruit_orange_l={path:"/Gameplay/Sprites/game_fruit_orange_l.png"};static game_fruit_orange_r={path:"/Gameplay/Sprites/game_fruit_orange_r.png"};static game_fruit_orange_s={path:"/Gameplay/Sprites/game_fruit_orange_s.png"};static game_fruit_purple={path:"/Gameplay/Sprites/game_fruit_purple.png"};static game_fruit_purple_l={path:"/Gameplay/Sprites/game_fruit_purple_l.png"};static game_fruit_purple_r={path:"/Gameplay/Sprites/game_fruit_purple_r.png"};static game_fruit_purple_s={path:"/Gameplay/Sprites/game_fruit_purple_s.png"};static game_fruit_red={path:"/Gameplay/Sprites/game_fruit_red.png"};static game_fruit_red_l={path:"/Gameplay/Sprites/game_fruit_red_l.png"};static game_fruit_red_r={path:"/Gameplay/Sprites/game_fruit_red_r.png"};static game_fruit_red_s={path:"/Gameplay/Sprites/game_fruit_red_s.png"};static game_fruit_yellow={path:"/Gameplay/Sprites/game_fruit_yellow.png"};static game_fruit_yellow_l={path:"/Gameplay/Sprites/game_fruit_yellow_l.png"};static game_fruit_yellow_r={path:"/Gameplay/Sprites/game_fruit_yellow_r.png"};static game_fruit_yellow_s={path:"/Gameplay/Sprites/game_fruit_yellow_s.png"};static panel={path:"/Initial/Sprites/UI/ui_atlas",frame:"panel.png"}}class e{static click={path:"/Initial/Audio/click"};static sword_unsheathing={path:"/Gameplay/Audio/sword-unsheathing"}}class i{static kenney_pixel={path:"/Initial/Font/kenney_pixel"}}class s{static locale_en={path:"/Initial/Strings/Localization/locale_en.json"};static locale_ph={path:"/Initial/Strings/Localization/locale_ph.json"};static score={path:"/Initial/Strings/score.json"}}class a{static initialized=!1;static init(t){this.initialized||(this.initialized=!0)}static getFrames(e,i=4){let s=[];for(var a=1;a<=i;a++){let i=t[e+"_"+a];s.push({key:i.path,frame:i.frame})}return s}}class n{static loadedAssets=[!1,!1];static loadAssets(a,n,r=!1,h,l){if(a.load.path="assets/",this.loadedAssets[n?0:1])h();else{for(var o in t){let e=t[o];this.canLoadAsset(n,e)&&(null==e.frame?a.load.image(e.path,e.path):a.load.atlas(e.path,e.path+".png",e.path+".json"))}for(var o in e){let t=e[o];this.canLoadAsset(n,t)&&a.load.audio(t.path,[t.path+".mp3",t.path+".ogg"])}for(var o in i){let t=i[o];this.canLoadAsset(n,t)&&a.load.bitmapFont(t.path,t.path+".png",t.path+".fnt")}for(var o in s){let t=s[o];this.canLoadAsset(n,t)&&a.load.json(t.path,t.path)}r&&a.load.start(),null!=l&&a.load.on("progress",l,a),null!=h&&(this.loadedAssets[n?0:1]=!0,a.load.on("complete",h,a))}}static canLoadAsset(t,e){return 1==t&&e.path.includes("Initial")||0==t&&e.path.includes("Gameplay")}}class r{constructor(){}static get config(){return h}}var h={game:null,world:null};class l extends Phaser.GameObjects.BitmapText{constructor(t,e,i,s){super(t,e,i,s.font.path,s.text,s.size,s.align),t.add.existing(this),this.initProperty(s),this.initListeners(),this.initGraphics()}initProperty(t){}initListeners(){}initGraphics(){}open(){this.setActive(!0),this.setVisible(!0)}close(){this.setActive(!1),this.setVisible(!1)}}class o{static values=new Map;static getValue(t){return this.values.get(t)}static setValue(t,e){this.values.set(t,e)}static modifyValue(t,e){let i=e+this.getValue(t);this.values.set(t,i)}}const c=Object.freeze({BOOL_FIRST_PLAY:"BOOL_FIRST_PLAY",IS_MUTED:"IS_MUTED",LOCALIZATION:"LOCALIZATION"});class u{static saveManagerSingleton;static init(){if(u.saveManagerSingleton)throw new Error("You can only initialize one manager instance");this.saveManagerSingleton=new u,this.saveManagerSingleton.loadData()}static get Instance(){if(!u.saveManagerSingleton)throw new Error("initialize Instantiator First!");return u.saveManagerSingleton}SAVE_DATA_PATH="Project_Name";BUILD_VERSION="0.0.1";initData(){o.setValue(c.BOOL_FIRST_PLAY,!0),o.setValue(c.IS_MUTED,!1),o.setValue(c.LOCALIZATION,"en")}saveData(){var t={first_play:o.getValue(c.BOOL_FIRST_PLAY),is_mute:o.getValue(c.IS_MUTED),localization:o.getValue(c.LOCALIZATION)};localStorage.setItem(this.SAVE_DATA_PATH,JSON.stringify(t))}loadData(){this.initData();var t=JSON.parse(localStorage.getItem(this.SAVE_DATA_PATH));null==t&&(this.initData(),this.saveData(),t=JSON.parse(localStorage.getItem(this.SAVE_DATA_PATH))),o.setValue(c.BOOL_FIRST_PLAY,t.first_play),o.setValue(c.IS_MUTED,t.is_mute),o.setValue(c.LOCALIZATION,t.localization)}resetData(){this.initData(),this.saveData()}}class g{audioManagerSingleton;sceneSoundManagerManager;currentBGMAudio;isMute;bgmVolume=.5;sfxVolume=.5;static init(t,e){if(g.audioManagerSingleton)throw new Error("You can only initialize one manager instance");this.audioManagerSingleton=new g,this.audioManagerSingleton.isMute=o.getValue(c.IS_MUTED),this.audioManagerSingleton.bgmVolume=e.bgmVolume,this.audioManagerSingleton.sfxVolume=e.sfxVolume,this.audioManagerSingleton.setMute(this.audioManagerSingleton.isMute),this.audioManagerSingleton.sceneSoundManager=t.sound}static get Instance(){if(!g.audioManagerSingleton)throw new Error("initialize Instantiator First!");return g.audioManagerSingleton}get IsMuted(){return this.isMute}setBGMVolume(t){this.bgmVolume=t}setSFXVolume(t){this.sfxVolume=t}setMute(t,e=!0){this.isMute=t,this.isMute?this.currentBGMAudio?.pause():this.isBGMPause()&&this.currentBGMAudio?.resume(),0!=e&&o.setValue(c.IS_MUTED,this.isMute)}playSFX(t,e=-1,i,s){let a=this.sceneSoundManager.get(t.path);a||(a=this.sceneSoundManager.add(t.path,{volume:-1==e?this.sfxVolume:e,loop:!1}));let n=null==s?this.sceneSoundManager:s;this.isMute?null!=i&&setTimeout((function(){i.call(n)}),1e3*a.duration):(a.play(),null!=i&&a.on("complete",i,n))}stopSFX(t){null!=this.sceneSoundManager.get(t.path)&&this.sceneSoundManager.stopByKey(t.path)}isBGMPause(){return!!this.currentBGMAudio&&this.currentBGMAudio.isPaused}playBGM(t,e=-1,i=!1){let s=this.sceneSoundManager.get(t.path);i&&null!=s&&s.pause(),-1!=e&&this.setBGMVolume(e),s&&1!=i?this.currentBGMAudio!=s&&(this.currentBGMAudio.pause(),s.play(),this.currentBGMAudio=s):(s=this.sceneSoundManager.add(t.path,{loop:!0,volume:-1==e?this.bgmVolume:e}),0==i&&this.currentBGMAudio?.stop(),this.currentBGMAudio=s,s.play()),this.isMute?s.pause():this.isBGMPause()&&0==this.isMute&&s.resume()}pauseBGM(){this.currentBGMAudio&&this.currentBGMAudio.pause()}}class p extends Phaser.GameObjects.Image{pointerDown;pointerUp;pointerOver;pointerOut;buttonScale={x:1,y:1};constructor(t,i,s,a){super(t,i,s,null!=a.texture?a.texture.path:a.path,null!=a.texture?a.texture.frame:a.frame);let n=null==a.duration?50:a.duration;this.setInteractive(),this.on(Phaser.Input.Events.POINTER_DOWN,(()=>{this.pointerDown&&(this.pointerDown(),this.setTint(16777215))}),this),this.on(Phaser.Input.Events.POINTER_UP,(()=>{this.pointerUp&&this.pointerUp(),g.Instance.playSFX(e.click,a.volume)}),this),this.on(Phaser.Input.Events.POINTER_OVER,(()=>{this.pointerOver&&this.pointerOver(),null!=a.willScale&&0==a.willScale||(this.scene.tweens.add({targets:this,scaleX:1.1*this.buttonScale.x,scaleY:1.1*this.buttonScale.y,duration:n}),this.setTint(11646136))}),this),this.on(Phaser.Input.Events.POINTER_OUT,(()=>{this.pointerOut&&this.pointerOut(),null!=a.willScale&&0==a.willScale||(this.scene.tweens.add({targets:this,scaleX:this.buttonScale.x,scaleY:this.buttonScale.y,duration:n}),this.setTint(16777215))}),this),t.add.existing(this)}setImage(t){this.setTexture(t.path,t.frame)}setScale(t,e){return this.buttonScale.x=t,this.buttonScale.y=null==e?t:e,super.setScale(t,e)}open(){this.setActive(!0),this.setVisible(!0)}close(){this.setActive(!1),this.setVisible(!1)}}class d{scene;layers;defaultLayer;constructor(t){this.scene=t,this.layers=new Map,this.defaultLayer=""}destroy(){this.layers.clear(),this.layers=void 0}addLayer(t,e=!1){if(null==this.layers)return;if(this.layers.has(t))return;(e||this.defaultLayer.length<1)&&(this.defaultLayer=t);let i=this.scene.add.layer();return this.layers.set(t,i),i}getLayer(t){if(null!=this.layers&&0!=this.layers.has(t))return this.layers.get(t)}removeLayer(t){if(null==this.layers)return;if(0==this.layers.has(t))return;this.layers.get(t).destroy(),this.layers.delete(t)}setLayerDepth(t,e,i=!0){this.getLayer(t).setDepth(e),i&&this.sortLayersByDepth()}sortLayersByDepth(){null!=this.layers&&(this.layers=new Map([...this.layers.entries()].sort(((t,e)=>e[1].depth-t[1].depth))))}setMainLayer(t){this.defaultLayer=t}addObject(t,e){if(null==e&&null!=this.defaultLayer&&(e=this.defaultLayer),null==e||0==this.layers.has(e))return t;let i=this.layers.get(e);i.add(t);let s=i.length-1;return t.name=e+"_object_"+s+"_"+t.type,"function"==typeof t.init&&t.init(),t}moveObjectToLayer(t,e,i){this.layers.get(e).remove(t);let s=this.layers.get(i);s.add(t);let a=s.length-1;t.name=i+"_object_"+a+"_"+t.type}update(t,e){if(void 0!==this.scene)for(let i of this.layers.values()){let s=i.length;for(;s-- >0;){let a=i.getAt(s);a.update(t,e),a.doDelete&&a.destroy()}}}}const _=Object.freeze({LAYER_BACKGROUND:"LAYER_BACKGROUND",LAYER_FOREGROUND:"LAYER_FOREGROUND",LAYER_PLAYER:"LAYER_PLAYER",LAYER_UI:"LAYER_UI"}),m=Object.freeze({BackgroundHex:"#3390e8",FontColor:"#000000"});class S extends Phaser.Scene{layerManager;get layer(){return this.layerManager}init(t){this.initProperty(),this.initListeners(),this.layerManager=new d(this),this.layerManager.addLayer(_.LAYER_BACKGROUND),this.layerManager.addLayer(_.LAYER_FOREGROUND,!0),this.layerManager.addLayer(_.LAYER_PLAYER),this.layerManager.addLayer(_.LAYER_UI)}preload(){}create(){this.initGraphics()}initProperty(){}initGraphics(){}initListeners(){this.events.once(Phaser.Scenes.Events.SHUTDOWN,this.destroy,this),this.scale.on(Phaser.Scale.Events.RESIZE,this.rescale,this)}inTransition(t=350){this.cameras.main.fadeIn(t)}outTransition(t=350){return this.cameras.main.fadeOut(t),t}rescale(){}destroy(){this.scale.off(Phaser.Scale.Events.RESIZE,this.rescale,this),this.layerManager?.destroy(),this.layerManager=void 0}}class f{name="";constructor(t){this.name=t}clear(t){y.emitter.removeListener(this.name,void 0,t)}addListener(t,e){y.emitter.addListener(this.name,t,e)}removeListener(t,e,i=!1){y.emitter.removeListener(this.name,t,e,i)}emit(...t){y.emitter.emit(this.name,...t)}}class y{static emitter=new Phaser.Events.EventEmitter;static ON_BLUR=new f("ON_BLUR");static ON_FOCUS=new f("ON_FOCUS");static ON_PAUSE=new f("ON_PAUSE");static ON_UNPAUSE=new f("ON_UNPAUSE");static CHANGE_LANGUAGE=new f("CHANGE_LANGUAGE");static UPDATE_UI=new f("UPDATE_UI")}class w{static jsonManagerSingleton;static jsonCache;static init(t){if(w.jsonManagerSingleton)throw new Error("You can only initialize one manager instance");this.jsonManagerSingleton=new w,this.jsonCache=t.cache.json}static get Instance(){if(!w.jsonManagerSingleton)throw new Error("initialize Instantiator First!");return w.jsonManagerSingleton}getJSON(t){return w.jsonCache.get(t.path)}}class E extends Phaser.GameObjects.Sprite{constructor(t,e,i,s){super(t,e,i,null!=s.texture?s.texture.path:s.path,null!=s.texture?s.texture.frame:s.frame),1==s.pixelize&&this.texture.setFilter(Phaser.Textures.NEAREST),t.add.existing(this),this.initProperty(s),this.initListeners(),this.initGraphics()}initProperty(t){}initListeners(){}initGraphics(){}setImage(t){this.setTexture(t.path,t.frame)}alive(){this.setActive(!0),this.setVisible(!0)}dead(){this.setActive(!1),this.setVisible(!1)}}class x extends Phaser.Physics.Matter.Sprite{constructor(t,e,i,s,a){super(e,i,s,null!=a.texture?a.texture.path:a.path,null!=a.texture?a.texture.frame:a.frame),1==a.pixelize&&this.texture.setFilter(Phaser.Textures.NEAREST),this.setSensor(!0),this.setStatic(!0),this.setVisible(!1),t.add.existing(this),this.initProperty(a),this.initListeners(),this.initGraphics()}initProperty(t){}initListeners(){}initGraphics(){}}class A extends Phaser.Physics.Matter.Sprite{config;textureName;constructor(e,i,s,a,n){let r=t[n];super(i,s,a,null!=r.texture?r.texture.path:r.path,null!=r.texture?r.texture.frame:r.frame),1==r.pixelize&&this.texture.setFilter(Phaser.Textures.NEAREST),this.textureName=n,this.config=r,this.setCircle(60),this.setSensor(!0),this.setStatic(!0),this.setVisible(!1),e.add.existing(this),this.initProperty(r),this.initListeners(),this.initGraphics()}initProperty(t){}initListeners(){}initGraphics(){this.fruitLeft=new x(this.scene,this.scene.matter.world,this.x-10,this.y,t[this.textureName+"_l"]),this.fruitRight=new x(this.scene,this.scene.matter.world,this.x+10,this.y,t[this.textureName+"_r"]),this.spark=new E(this.scene,0,0,t[this.textureName+"_s"]),this.spark.setVisible(!1)}sliced(){g.Instance.playSFX(e.sword_unsheathing),this.dead(),this.spark.setPosition(this.x,this.y),this.spark.setVisible(!0),this.scene.time.delayedCall(300,(()=>{this.spark.setVisible(!1)})),this.fruitShow(this.fruitLeft,this.x-40),this.fruitShow(this.fruitRight,this.x+40),this.fruitLeft.applyForce({x:-.05,y:-Phaser.Math.FloatBetween(0,.12)}),this.fruitRight.applyForce({x:.05,y:-Phaser.Math.FloatBetween(0,.12)})}fruitShow(t,e){t.angle=Phaser.Math.Between(0,90),t.setStatic(!1),t.setVisible(!0),t.setVelocity(0),t.setPosition(e,this.y)}fruitHide(t){t.y=0,t.setVisible(!1),t.setStatic(!0),t.setVelocity(0)}alive(){this.spark.setVisible(!1),this.setActive(!0),this.setVisible(!0),this.setStatic(!1),this.setVelocity(0)}dead(){this.setActive(!1),this.setVisible(!1),this.setStatic(!0),this.setVelocity(0)}}class O extends S{static Name="GameUI";scoreText;timerText;initGraphics(){this.scoreText=new l(this,30,0,{text:"0",font:i.kenney_pixel,size:104,align:0}),this.scoreText.setOrigin(0),this.timerText=new l(this,r.config.world.width-30,0,{text:"30",font:i.kenney_pixel,size:104,align:2}),this.timerText.setOrigin(1,0),this.rescale()}initListeners(){super.initListeners(),y.ON_BLUR.addListener(this.onBlur,this),y.ON_FOCUS.addListener(this.onFocus,this),y.UPDATE_UI.addListener(this.updateUI,this)}updateUI(t,e){switch(t){case"SCORE":this.scoreText.setText(e);break;case"TIMER":this.timerText.setText(e)}}onBlur(){}onFocus(){}rescale(){this.scoreText.y=r.config.world.centerY-.5*r.config.world.height,this.timerText.y=r.config.world.centerY-.5*r.config.world.height}destroy(){super.destroy(),y.ON_BLUR.clear(this),y.ON_FOCUS.clear(this)}}class T extends Phaser.GameObjects.Image{constructor(t,e,i,s){super(t,e,i,null!=s.texture?s.texture.path:s.path,null!=s.texture?s.texture.frame:s.frame),t.add.existing(this)}setImage(t){this.setTexture(t.path,t.frame)}open(){this.setActive(!0),this.setVisible(!0)}close(){this.setActive(!1),this.setVisible(!1)}}class I extends Phaser.GameObjects.Container{baseSlot;baseText;set pointerUp(t){this.baseSlot.pointerUp=t}constructor(t,e,i,s){super(t,e,i),this.baseSlot=new p(t,0,0,{texture:s.texture}),this.baseSlot.setOrigin(.5),this.baseText=new l(t,0,-28,{text:s.text,font:s.font,size:s.size,align:s.align}),this.baseText.setOrigin(.5),this.baseText.setTint(s.color),this.add([this.baseSlot,this.baseText]),t.add.existing(this)}open(){this.setActive(!0),this.setVisible(!0)}close(){this.setActive(!1),this.setVisible(!1)}}class M extends S{static Name="PostScene";scoreText;initGraphics(){let e=new T(this,r.config.world.centerX,r.config.world.centerY,t.board);e.setOrigin(.5),e.setScale(1),this.scoreText=new l(this,r.config.world.centerX,e.y-80,{text:"SCORE:\n"+o.getValue("SCORE"),font:i.kenney_pixel,size:84,align:1}),this.scoreText.setTint(0),this.scoreText.setOrigin(.5);let s=new I(this,r.config.world.centerX,e.y+80,{texture:t.button,text:"RETRY",font:i.kenney_pixel,color:0,size:84,align:1});s.baseSlot.setScale(2),s.pointerUp=this.onRetry.bind(this)}onRetry(){this.scene.get(P.Name).scene.restart(),this.scene.stop()}}class P extends S{static Name="MainGame";fruits;init(){super.init()}create(){super.create(),this.scene.launch(O.Name)}initProperty(){this.fruits=[],this.index=Phaser.Math.Between(0,5),this.isHoldingMouse=!1,this.isDraggingMouse=!1,o.setValue("SCORE",0),o.setValue("TIMER",30)}initGraphics(){this.bg=new E(this,r.config.world.centerX,r.config.world.centerY,t.game_bg),this.bg.setOrigin(.5);let e=new A(this,this.matter.world,r.config.world.centerX,0,"game_fruit_blue");this.fruits.push(e);let i=new A(this,this.matter.world,r.config.world.centerX,0,"game_fruit_green");this.fruits.push(i);let s=new A(this,this.matter.world,r.config.world.centerX,0,"game_fruit_orange");this.fruits.push(s);let a=new A(this,this.matter.world,r.config.world.centerX,0,"game_fruit_purple");this.fruits.push(a);let n=new A(this,this.matter.world,r.config.world.centerX,0,"game_fruit_red");this.fruits.push(n);let h=new A(this,this.matter.world,r.config.world.centerX,0,"game_fruit_yellow");this.fruits.push(h),this.rescale(this.scale.baseSize)}initListeners(){super.initListeners(),this.input.on(Phaser.Input.Events.POINTER_DOWN,(()=>{this.isHoldingMouse=!0})),this.input.on(Phaser.Input.Events.POINTER_DOWN_OUTSIDE,(()=>{this.isHoldingMouse=!0})),this.input.on(Phaser.Input.Events.POINTER_MOVE,(t=>{if(this.isHoldingMouse){this.isDraggingMouse=!0;for(let e=0;e<this.fruits.length;e++){let i=this.fruits[e];if(!i.visible)continue;let a=0,n=i.x-i.body.circleRadius-a,r=i.x+i.body.circleRadius+a,h=i.y-i.body.circleRadius-a,l=i.y+i.body.circleRadius+a;if(n<t.x&&r>t.x&&h<t.y&&l>t.y){i.sliced();let t=w.Instance.getJSON(s.score)[i.textureName];o.modifyValue("SCORE",t),y.UPDATE_UI.emit("SCORE",o.getValue("SCORE"))}}}})),this.input.on(Phaser.Input.Events.POINTER_UP_OUTSIDE,(()=>{this.isHoldingMouse=!1,this.isDraggingMouse=!1})),this.input.on(Phaser.Input.Events.POINTER_UP,(()=>{this.isHoldingMouse=!1,this.isDraggingMouse=!1})),this.time.addEvent({delay:1400,callback:()=>{let t=this.index,e=this.fruits[t];e.alive();let i=Phaser.Math.Between(50,r.config.world.width-50),s=r.config.world.centerY+.5*r.config.world.height+10,a=Phaser.Math.FloatBetween(0,.24);a=i<r.config.world.centerX?a:-a;let n=Phaser.Math.FloatBetween(.8,1);e.setPosition(i,s),e.applyForce({x:a,y:-n}),this.index=(this.index+1)%this.fruits.length},repeat:-1}),this.time.addEvent({delay:1e3,callback:()=>{o.modifyValue("TIMER",-1);let t=o.getValue("TIMER");y.UPDATE_UI.emit("TIMER",t),t<=0&&(this.scene.pause(),this.scene.setVisible(!1,O.Name),this.scene.launch(M.Name))},repeat:29})}update(){this.input.mousePointer;for(let t=0;t<this.fruits.length;t++){let e=this.fruits[t];e.y>r.config.world.centerY+.5*r.config.world.height+10&&0==e.isStatic&&e.dead(),e.fruitLeft.y>r.config.world.centerY+.5*r.config.world.height+10&&e.fruitHide(e.fruitLeft),e.fruitRight.y>r.config.world.centerY+.5*r.config.world.height+10&&e.fruitHide(e.fruitRight)}}rescale(t){if(null!=t){let t=o.getValue("ASPECTRATIO"),e=this.scale.parentSize.height/this.scale.parentSize.width,i=e<t?t:e;this.bg.setScale(.9*i)}}destroy(){this.scene.stop(O.Name),super.destroy(),y.ON_PAUSE.clear(),y.ON_UNPAUSE.clear(),y.CHANGE_LANGUAGE.clear(),y.UPDATE_UI.clear()}}class L{static sceneManagerSingleton;static init(){if(L.sceneManagerSingleton)throw new Error("You can only initialize one manager instance");this.sceneManagerSingleton=new L}static get Instance(){if(!L.sceneManagerSingleton)throw new Error("initialize Instantiator First!");return L.sceneManagerSingleton}fadeOutIn(t,e,i=250){t.cameras.main.fadeOut(i),t.time.addEvent({delay:250,callback(){t.cameras.main.fadeIn(i),e(t)},callbackScope:t})}fadeOutSceneTo(t,e,i=250){t.cameras.main.fadeOut(i),t.time.addEvent({delay:250,callback(){t.scene.start(e)},callbackScope:t})}transitionToScene(t,e){var i=0;"function"!=typeof t.outTransition||(i=t.outTransition(),Number.isFinite(i)||(i=0)),t.time.addEvent({delay:i,callback(){var i=t.scene.start(e).get(e);i.events.once("create",(function(){"function"!=typeof i.inTransition||i.inTransition()}),i)},callbackScope:t})}}class b extends S{static Name="MainMenu";title;playButton;hello;init(){super.init()}create(){super.create()}initGraphics(){this.bg=new E(this,r.config.world.centerX,r.config.world.centerY,t.game_bg),this.bg.setOrigin(.5),this.title=new l(this,r.config.world.centerX,100,{font:i.kenney_pixel,size:124,align:1}),this.title.setOrigin(.5),this.title.setText("Simple\nFruit Ninja"),this.playButton=new p(this,r.config.world.centerX,r.config.world.centerY,{texture:t.button_play}),this.playButton.setOrigin(.5),this.playButton.pointerUp=this.onPlay.bind(this),this.rescale(this.scale.baseSize)}onPlay(){this.title.setVisible(!1),this.playButton.setVisible(!1);let t=new l(this,r.config.world.centerX,r.config.world.centerY,{font:i.kenney_pixel,align:1});t.setOrigin(.5),n.loadAssets(this,!1,!0,(()=>{a.init(this),L.Instance.transitionToScene(this,P.Name)}),(e=>{let i=Phaser.Math.RoundTo(100*e,0).toString();t.setText(`LOADING...\n${i}%`)}))}rescale(t){if(null!=t){let t=o.getValue("ASPECTRATIO"),e=this.scale.parentSize.height/this.scale.parentSize.width,i=e<t?t:e;this.bg.setScale(.9*i)}this.title.y=r.config.world.centerY-.5*r.config.world.height+100}}class N extends S{static Name="Preloader";preload(){n.loadAssets(this,!0,!1,this.nextScene)}nextScene(){L.Instance.transitionToScene(this,b.Name)}rescale(){super.rescale()}destroy(){super.destroy()}}class R extends S{static Name="SplashScreen";init(){super.init()}create(){super.create(),this.nextScene()}nextScene(){this.scene.start(N.Name)}rescale(){super.rescale()}destroy(){super.destroy()}}class v{static managerSingleton;currentLanguage;languageData;static init(){if(this.managerSingleton)throw new Error("You can only initialize one manager instance");{this.managerSingleton=new v;let t=o.getValue(c.LOCALIZATION);this.managerSingleton.currentLanguage=t,this.managerSingleton.languageData=s["locale_"+t]}}static get Instance(){if(!v.managerSingleton)throw new Error("initialize Instantiator First!");return v.managerSingleton}get CurrentLanguage(){return this.currentLanguage}setLanguage(t){this.currentLanguage=t,this.languageData=s["locale_"+t],o.setValue(c.LOCALIZATION,t),u.Instance.saveData(),y.CHANGE_LANGUAGE.emit()}getLocalized(){return w.Instance.getJSON(this.languageData)}getLocalizedTextObject(t){return this.getLocalized().localization[t]}}class G extends Phaser.Structs.Size{_minAspectRatio;_width;_height;constructor(t,e,i,s,a){super(t,e,i,s),this._minAspectRatio=a}setSize(t,e){switch(void 0===t&&(t=0),void 0===e&&(e=t),this.aspectMode){case Phaser.Scale.NONE:this._width=this.getNewWidth(Phaser.Math.Snap.Floor(t,this.snapTo.x)),this._height=this.getNewHeight(Phaser.Math.Snap.Floor(e,this.snapTo.y)),this.setAspectRatio(0===this._height?1:this._width/this._height);break;case Phaser.Scale.WIDTH_CONTROLS_HEIGHT:if(e/t<this._minAspectRatio){let t=e/this._minAspectRatio;this._width=this.getNewWidth(Phaser.Math.Snap.Floor(t,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1)}else this._width=this.getNewWidth(Phaser.Math.Snap.Floor(t,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case Phaser.Scale.HEIGHT_CONTROLS_WIDTH:if(t/e<this._minAspectRatio){let e=t/this._minAspectRatio;this._height=this.getNewHeight(Phaser.Math.Snap.Floor(e,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1)}else this._height=this.getNewHeight(Phaser.Math.Snap.Floor(e,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case Phaser.Scale.FIT:this.constrain(t,e,!0);break;case Phaser.Scale.ENVELOP:this.constrain(t,e,!1)}return this}}class V extends Phaser.Scene{static Name="BootScene";minAspectRatio;preload(){}create(){this.minAspectRatio=746/560,this.scale.displaySize=new G(this.scale.displaySize.width,this.scale.displaySize.height,this.scale.displaySize.aspectMode,void 0,this.minAspectRatio),o.setValue("ASPECTRATIO",this.minAspectRatio),r.config.world={width:this.cameras.main.width,height:this.cameras.main.height,centerX:this.cameras.main.centerX,centerY:this.cameras.main.centerY},u.init(),g.init(this,{bgmVolume:.3,sfxVolume:1}),w.init(this),v.init(),L.init(),this.scale.on(Phaser.Scale.Events.RESIZE,this.rescale,this),this.scale.refresh(),this.game.events.addListener(Phaser.Core.Events.BLUR,this.onBlur,this),this.game.events.addListener(Phaser.Core.Events.FOCUS,this.onFocus,this),this.nextScene()}onBlur(){g.Instance.setMute(!0,!1),y.ON_BLUR.emit()}onFocus(){0==o.getValue(c.IS_MUTED)&&g.Instance.setMute(!1,!1),y.ON_FOCUS.emit()}nextScene(){this.scene.start(R.Name)}destroy(){this.scale.off(Phaser.Scale.Events.RESIZE,this.rescale,this),this.game.events.removeListener(Phaser.Core.Events.BLUR,this.onBlur),this.game.events.removeListener(Phaser.Core.Events.FOCUS,this.onFocus)}rescale(t){if(null==r.config.world)return;let e,i=0,s=0;switch(this.scale.scaleMode){case Phaser.Scale.FIT:case Phaser.Scale.NONE:break;case Phaser.Scale.WIDTH_CONTROLS_HEIGHT:e=!0;break;case Phaser.Scale.HEIGHT_CONTROLS_WIDTH:e=!1;break;case Phaser.Scale.ENVELOP:case Phaser.Scale.RESIZE:e=this.scale.height>this.scale.width}null!=e&&(0==e?(i=this.scale.parentSize.width/this.scale.parentSize.height,s=i<this.minAspectRatio?this.minAspectRatio:i,r.config.world.width=this.scale.baseSize.height*s):1==e&&(i=this.scale.parentSize.height/this.scale.parentSize.width,s=i<this.minAspectRatio?this.minAspectRatio:i,r.config.world.height=this.scale.baseSize.width*s))}}const U={scale:{mode:Phaser.Scale.WIDTH_CONTROLS_HEIGHT,autoCenter:Phaser.Scale.CENTER_BOTH,width:560,height:1212,parent:"content"},backgroundColor:m.BackgroundHex,type:Phaser.AUTO,physics:{default:"matter",matter:{debug:!1}},input:{keyboard:!0},title:"tb_simple_fruit_ninja",version:"0.0.1"};class D extends Phaser.Game{constructor(t){super(t),this.scene.add(V.Name,V),this.scene.add(N.Name,N),this.scene.add(R.Name,R),this.scene.add(b.Name,b),this.scene.add(P.Name,P),this.scene.add(O.Name,O),this.scene.add(M.Name,M),this.scene.start(V.Name)}}var B=new D(U);r.config.game=B})();